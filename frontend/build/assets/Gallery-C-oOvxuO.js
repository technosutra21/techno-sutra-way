import{j as e}from"./ui-CNstozTn.js";import{r}from"./vendor-DWZhD1wM.js";import{C as y}from"./card-CXYH1faZ.js";import{c as S,B as n}from"./index-vPc54tj1.js";import{S as k,I as M}from"./input-D1Zfcif_.js";import{u as U,E as D,B as u,a as L}from"./useSutraData-CZn5iST_.js";import{C as E}from"./CharacterDetailModal-D6Vkj3PG.js";import{m as d}from"./animations-CDP8czNI.js";import{M as I}from"./map-pin-D09srkZu.js";import{S as B}from"./star-WQQtQb6M.js";import{D as R}from"./download-B56vlWGy.js";import"./query-CJXKl7Sg.js";import"./router-DAaxAjqu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=S("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),W=()=>{const[o,h]=r.useState(""),[i,g]=r.useState("all"),[f,m]=r.useState(null),[p,j]=r.useState([]),[b,x]=r.useState(!1),{getCombinedData:N,loading:l,error:c}=U();r.useEffect(()=>{if(!l&&!c){const t=N("pt").map((s,z)=>({id:s.chapter,title:s.nome,subtitle:`Capítulo ${s.chapter}`,description:s.descPersonagem||s.ensinamento.substring(0,150)+"...",fullDescription:s.descPersonagem,teaching:s.ensinamento,chapter:s.chapter,modelUrl:s.linkModel,thumbnailUrl:`https://via.placeholder.com/300x200/000011/00ffff?text=${encodeURIComponent(s.nome.substring(0,15))}`,tags:[s.ocupacao||"Místico","Budista","3D","Cyberpunk",s.local?"Localizado":"Espiritual"].filter(Boolean),rarity:s.chapter%7===0?"legendary":s.chapter%3===0?"epic":"common",downloads:Math.floor(Math.random()*1e4)+s.chapter*100,rating:(4+Math.random()).toFixed(1),occupation:s.ocupacao,meaning:s.significado,location:s.local,chapterSummary:s.resumoCap,capUrl:s.capUrl,qrCodeUrl:s.qrCodeUrl}));j(t)}},[l,c]);const v=p.filter(a=>{const t=a.title.toLowerCase().includes(o.toLowerCase())||a.description.toLowerCase().includes(o.toLowerCase())||a.occupation.toLowerCase().includes(o.toLowerCase())||a.location.toLowerCase().includes(o.toLowerCase())||a.chapter.toString().includes(o),s=i==="all"||a.rarity===i;return t&&s}),w=a=>{switch(a){case"legendary":return"bg-gradient-to-r from-yellow-400 to-orange-500";case"epic":return"bg-gradient-to-r from-purple-400 to-pink-500";default:return"bg-gradient-to-r from-blue-400 to-cyan-500"}},C=a=>{const t=encodeURIComponent(a.modelUrl),s=encodeURIComponent(a.title);window.open(`/model-viewer?url=${t}&title=${s}`,"_blank")};return e.jsxs("div",{className:"min-h-screen bg-background p-6",children:[e.jsxs(d.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary text-glow mb-2",children:"Galeria de Personagens 3D"}),e.jsxs("p",{className:"text-muted-foreground",children:["Explore os ",p.length," personagens místicos do Sutra Stem Array"]}),l&&e.jsx("p",{className:"text-accent text-sm mt-2",children:"Carregando dados do Sutra..."}),c&&e.jsxs("p",{className:"text-destructive text-sm mt-2",children:["Erro ao carregar dados: ",c]})]}),e.jsx(d.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"mb-8 space-y-4",children:e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[300px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(M,{placeholder:"Buscar personagens, ocupações, locais...",value:o,onChange:a=>h(a.target.value),className:"pl-10 bg-secondary border-border"})]})}),e.jsx("div",{className:"flex gap-2",children:["all","common","epic","legendary"].map(a=>e.jsx(n,{variant:i===a?"default":"outline",size:"sm",onClick:()=>g(a),className:i===a?"gradient-neon text-black":"border-neon",children:a==="all"?"Todos":a.charAt(0).toUpperCase()+a.slice(1)},a))})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:v.map((a,t)=>e.jsx(d.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:t*.05},children:e.jsxs(y,{className:"cyberpunk-card overflow-hidden group",children:[e.jsxs("div",{className:"relative aspect-video bg-secondary",children:[e.jsx("img",{src:a.thumbnailUrl,alt:a.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded text-xs font-bold text-black ${w(a.rarity)}`,children:a.rarity.toUpperCase()}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{onClick:()=>C(a),className:"gradient-neon text-black font-bold",size:"sm",children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"3D"]}),e.jsxs(n,{onClick:()=>{m(a),x(!0)},variant:"outline",className:"border-neon bg-background/80",size:"sm",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),"Info"]})]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-bold text-primary flex-1",children:a.title}),e.jsxs(u,{variant:"outline",className:"text-xs",children:["Cap. ",a.chapter]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-accent mb-2",children:[e.jsx(L,{className:"w-3 h-3"}),e.jsx("span",{children:a.occupation})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-3",children:[e.jsx(I,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:a.location})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:[e.jsx("strong",{children:"Significado:"})," ",a.meaning]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:a.tags.slice(0,3).map(s=>e.jsx(u,{variant:"secondary",className:"text-xs",children:s},s))}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3 text-yellow-400 fill-current"}),a.rating]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"}),a.downloads.toLocaleString()]})]})]})]})},a.id))}),e.jsx(E,{character:f,isOpen:b,onClose:()=>{x(!1),m(null)}})]})};export{W as default};
