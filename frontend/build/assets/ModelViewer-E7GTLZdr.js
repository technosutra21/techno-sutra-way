import{j as e}from"./ui-CNstozTn.js";import{r as n}from"./vendor-DWZhD1wM.js";import{b as j,c as y}from"./router-DAaxAjqu.js";import{c as u,B as i}from"./index-vPc54tj1.js";import{C as p}from"./card-CXYH1faZ.js";import{m as t}from"./animations-CDP8czNI.js";import{D as v}from"./download-B56vlWGy.js";import"./query-CJXKl7Sg.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=u("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=u("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),L=()=>{const[c]=j(),d=y(),s=n.useRef(null),[f,l]=n.useState(!0),[m,x]=n.useState(null),r=c.get("url"),o=c.get("title")||"Modelo 3D";n.useEffect(()=>{if(!r){x("URL do modelo não fornecida"),l(!1);return}const a=document.createElement("script");return a.type="module",a.src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js",document.head.appendChild(a),a.onload=()=>{l(!1)},a.onerror=()=>{x("Erro ao carregar o visualizador 3D"),l(!1)},()=>{document.head.removeChild(a)}},[r]);const g=()=>{if(r){const a=document.createElement("a");a.href=r,a.download=`technosutra_${o.replace(/\s+/g,"_")}.glb`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},b=()=>{s.current&&(s.current.resetTurntableRotation(),s.current.jumpCameraToGoal())};return m?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs(p,{className:"cyberpunk-card p-8 max-w-md text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-destructive mb-4",children:"Erro"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:m}),e.jsxs(i,{onClick:()=>d("/map"),className:"gradient-neon text-black font-bold",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Voltar ao Mapa"]})]})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(t.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:"fixed top-0 left-0 right-0 z-50 bg-background/90 backdrop-blur-md border-b border-border",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>d("/map"),className:"neon-glow",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Voltar"]}),e.jsx("h1",{className:"text-xl font-bold text-primary text-glow",children:o})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:b,className:"purple-glow",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Reset"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:g,className:"border-neon",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})}),f&&e.jsx(t.div,{initial:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(t.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx(t.h2,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:"text-xl font-bold text-primary text-glow",children:"Carregando Modelo 3D..."})]})}),e.jsx(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"pt-20 h-screen",children:e.jsx("model-viewer",{ref:s,src:r,alt:o,"auto-rotate":!0,"camera-controls":!0,"environment-image":"https://modelviewer.dev/shared-assets/environments/moon_1k.hdr",style:{width:"100%",height:"calc(100vh - 80px)",background:"linear-gradient(135deg, #000000 0%, #1a1a2e 50%, #16213e 100%)"},loading:"eager",reveal:"auto","tone-mapping":"aces","shadow-intensity":"1","shadow-softness":"0.5","interaction-prompt":"none",children:e.jsx("div",{className:"progress-bar hide",slot:"progress-bar",children:e.jsx("div",{className:"update-bar"})})})}),e.jsx(t.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"fixed bottom-4 left-4 right-4 z-30",children:e.jsx(p,{className:"cyberpunk-card p-4 mx-auto max-w-2xl",children:e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{className:"text-primary",children:"Controles:"})," Arraste para rotacionar • Scroll para zoom • Clique duplo para focar"]}),e.jsxs("p",{className:"text-xs",children:["Modelo 3D do ",o," - Parte da jornada sagrada Techno Sutra"]})]})})})]})};export{L as default};
